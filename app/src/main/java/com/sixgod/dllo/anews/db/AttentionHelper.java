package com.sixgod.dllo.anews.db;

import android.animation.AnimatorSet;
import android.content.Context;

import java.util.ArrayList;
import java.util.List;

import de.greenrobot.dao.query.QueryBuilder;

/**
 * Created by dllo on 16/3/14.
 */
public class AttentionHelper {
    private DaoMaster master;
    private DaoSession session;
    private Context context;
    private QueryBuilder builder;
    private static AttentionHelper helper;
    public static AttentionHelper newHelper(Context context){
        if (helper==null){
            return new AttentionHelper(context);
        }
        else return helper;
    }
    private AttentionHelper(Context context) {
        this.context = context;
        DaoMaster.DevOpenHelper helper = new DaoMaster.DevOpenHelper(context,"attention.db",null);
        master = new DaoMaster(helper.getReadableDatabase());
        session = master.newSession();
        builder = session.getAttentionDao().queryBuilder();
    }

    public Long insertAttention(String url,String title){
        builder.where(AttentionDao.Properties.Url.eq(url));
        if (builder.list().size()<=0) {
            Attention attention = new Attention();
            attention.setTitle(title);
            attention.setUrl(url);
            return session.getAttentionDao().insert(attention);
        }
      else {
            return 0l;
        }
    }
    public void cancelAttention(String url){
        builder.where(AttentionDao.Properties.Url.eq(url));
        session.delete(builder.list().get(0));
    }
    public List<Attention> allData(){
        QueryBuilder builder = session.getAttentionDao().queryBuilder();
       return builder.list();
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              

